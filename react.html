<html>
<head>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
<script src="js/views/summaryView.js" type="text/jsx"></script>
<script src="js/views/sidebarView.js" type="text/jsx"></script>
<script src="js/views/searchFromView.js" type="text/jsx"></script>
<script src="js/views/searchView.js" type="text/jsx"></script>
<script src="js/views/detailsView.js" type="text/jsx"></script>
<script src="js/views/promiseNoData.js" type="text/jsx"></script>
<script src="js/reactjs/sidebarPresenter.js" type="text/jsx"></script>
<script src="js/reactjs/summaryPresenter.js" type="text/jsx"></script>
<script src="js/reactjs/showPresenter.js" type="text/jsx"></script>
<script src="js/reactjs/searchPresenter.js" type="text/jsx"></script>
<script src="js/reactjs/detailsPresenter.js" type="text/jsx"></script>
<script src="js/app.js" type="text/jsx"></script>
<script src="js/reactjs/useModelProperties.js" type="text/jsx"></script>
<script src="js/apiConfig.js"></script>
<script src="js/dishSource.js"></script>
<script src="js/DinnerModel.js"></script>
<script src="js/reactjs/usePromise.js"></script>
<link rel="stylesheet" href="style.css">
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-database.js"></script>
<script src="js/firebaseConfig.js"></script>
<script src="js/firebaseModel.js"></script>

<meta name="viewport" content="width=device-width,initial-scale=1">

</head>
<body>
<div id="app"></div>
</body>


<script type="text/jsx">
    const myModel = new DinnerModel();
    persistModel(myModel);
    firebase.database().ref("dinnerModel").once("value").then(() => ReactDOM.render(<App model={myModel}/>, document.getElementById("app")));
    /*persistModel(myModel);
    ReactDOM.render(<App model={myModel}/>, document.getElementById("app"));*/
    /*Promise.all(
        [DishSource.getDishDetails(523145), 
        DishSource.getDishDetails(787321),
        DishSource.getDishDetails(452179)]
   ).then(function(values){ 
          values.map(d=>myModel.addToMenu(d));   // add the dishes to the model
          
         });*/
   

/*
const searchPromise= DishSource.searchDishes({type:"main course", query:"pasta" });
const detailsPromise= DishSource.getDishDetails(523145);
const SearchTest = () => {
        const [data, setData]=React.useState(null);
        const [error, setError]=React.useState(null);

        React.useEffect(() => { 
            searchPromise.then(dt=> setData(dt))
                         .catch(er=> setError(er))
        }, []);
        return promiseNoData(searchPromise, data, error) || <SearchResultsView searchResults={data} />
     } 

const DetailsTest = () => {
        const [data, setData]=React.useState(null);
        const [error, setError]=React.useState(null);

        React.useEffect(() => { 
            detailsPromise.then(dt=> setData(dt))
                         .catch(er=> setError(er))
        }, []);
    return promiseNoData(searchPromise, data, error) || <DetailsView dish={data} people = {1} />
     } 

     ReactDOM.render(<div><SearchTest /><DetailsTest/></div>, document.getElementById("app"));
const RenderTest = () =>{ console.log("sub-component render test"); return false; }
const persons=4;
*/
//-------------------------SummaryView
/*Promise.all(
     [DishSource.getDishDetails(548321), 
     DishSource.getDishDetails(758118),
     DishSource.getDishDetails(1152690)]
).then(values => ReactDOM.render(<SummaryView guests={5} dishes={values} />, document.getElementById("app")))*/

//-------------------------DishDetails
/*DishSource.getDishDetails(452179).then(details=>
          ReactDOM.render(<DetailsView dish={details} people={3}  isDishInMenu={false} 
                                    dishAdded={()=>console.log("User wants to add this dish! ", details)}
 />,  document.getElementById("app"))); */



 //-----------------------Sidebarview
/*Promise.all(
     [DishSource.getDishDetails(523145), 
     DishSource.getDishDetails(787321),
     DishSource.getDishDetails(452179)]
).then(values => ReactDOM.render(<SidebarView guests={5} 
                                            dishes={values} 
                                            removeDish={id=> console.log("user wants to remove dish with ID ", id)}
                                            dishChoice={id=> console.log("user wants details of dish with ID ", id)}/>, document.getElementById("app")))*/

//-----------------------Dishresults                                            
/*DishSource.searchDishes({query:"pizza"}).then(results=>
          ReactDOM.render(<SearchResultsView searchResults={results} 
                                               dishChosen={id=> console.log("The user chose a dish", id) } 
                             /> 
                             ,document.getElementById("app"))
);*/


/*const ReactTopLevelNumber= () => {
    const [num, setNumber]= React.useState(2); 
    return (
      <div>
         <SidebarView guests={num} setGuests={x=> setNumber(x)} />
         <SummaryView persons={num}/>
         <RenderTest />
      </div> 
    );
}
ReactDOM.render(<ReactTopLevelNumber />, document.getElementById("app"));*/
/*ReactDOM.render(
    <div>
        <SummaryView persons={5} />
        <SidebarView 
        guests={3}
        setGuests={n=>console.log("The user wants a dinner for ", n, " people")}
        /> 
        <SearchFromView 
        options={["starter", "main course", "dessert"]}
        onSearch={()=>console.log("User wants to search!")}             
		onText={txt=>console.log("User typed: ", txt)}	
		onDishType={dishType=>console.log("User chose dish type: ", dishType)}
        />  
    </div>
    ,document.getElementById("app"));*/
/*ReactDOM.render(
   <div>
       Summary for <span title="nr. guests">{persons}</span> guests:
   </div>
,  document.getElementById("app")
);*/
</script>

</html>
